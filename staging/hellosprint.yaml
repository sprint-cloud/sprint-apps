apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: hellosprint-staging
  namespace: argocd
  annotations:
    notifications.argoproj.io/subscribe.on-deployed.slack: deployment
spec:
  destination:
    namespace: sprint-staging
    server: https://kubernetes.default.svc
  project: sprint-staging
  source:
    chart: sprint-flask-app
    repoURL: https://sprint-cloud.github.io/helm-charts
    targetRevision: 0.1
    helm:
      values: |-
          image: 
            repository: ghcr.io/sprint-cloud/hello-sprint
            tag: e4cc7fb5cd9b2cf5f6faeff3c9082a75ad93921a
  syncPolicy:
    automated:
      selfHeal: true
      prune: true
